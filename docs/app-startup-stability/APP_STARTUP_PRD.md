# 앱 시작 안정화 PRD

## 배경
앱 시작 시 초기화/인증/스플래시 흐름이 복잡해지면서 오류 발생 시 복구가 어렵고,
성능 측정/로그/리포팅 체계가 부족합니다. 이 문서는 프로덕션 수준의 안정성을
확보하기 위한 개선 목표와 범위를 정의합니다.

## 목표
- 초기화 실패 시 사용자 복구 경로 제공
- 앱 초기화와 인증 로딩의 상태 경계 명확화
- 시작 성능 측정 및 가시성 확보
- 기본적인 크래시/리포팅 체계 도입
- 스플래시 UX의 일관성 및 예외 상황(백그라운드 복귀) 안정화

## 비목표
- 전체 UI/디자인 리브랜딩
- 백엔드 API 변경
- 전면적인 상태관리 교체

## 사용자 시나리오
1) 사용자가 앱을 실행하면 스플래시가 즉시 표시되고, 초기화 상태가 안내된다.
2) 초기화 실패 시 원인 메시지와 함께 재시도/종료/오프라인 모드 등의 선택지를 제공한다.
3) 초기화 완료 후 인증 상태에 맞게 로그인/홈으로 정상 전환된다.
4) 앱이 백그라운드에서 복귀해도 초기화 상태가 꼬이지 않는다.

## 요구사항
### 1. 초기화 실패 처리
- 실패 시 재시도 버튼 제공
- 치명적 오류/네트워크 오류 분리 표시
- 최소 한 번은 사용자에게 복구 시도 기회 제공

### 2. 상태 분리
- 앱 초기화 상태(AppInit)와 인증 상태(Auth) 분리
- 라우팅은 AppInit 완료 후 Auth 상태 기준으로 동작

### 3. 성능 측정
- 앱 시작부터 첫 화면 진입까지의 시간 측정
- 초기화 단계별 소요 시간 로그 기록
- 디버그/릴리즈 모드에서 로그 레벨 분리

### 4. 크래시/리포팅
- 초기화 실패/예외 상황을 리포팅
- 최소한의 오류 추적 도구 도입(예: Crashlytics 등)

### 5. 스플래시 UX
- 네이티브→Flutter 전환 시 깜빡임 최소화
- 백그라운드 복귀 시 스플래시 재노출 여부 정의

## 성공 지표
- 초기화 실패 시 재시도 성공률
- 앱 시작 시간 P50/P90 측정 가능
- 크래시 리포팅 대시보드에서 초기화 관련 오류 식별 가능

## 제약 사항
- Flutter/Riverpod 구조 유지
- iOS/Android 모두 동일한 플로우 적용

## 오픈 이슈
- 오프라인 모드 지원 범위 정의 필요
- 초기화 실패 시 앱 종료 처리 여부
